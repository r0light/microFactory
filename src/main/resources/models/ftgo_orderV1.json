{
  "services":[
    {
      "name": "itemviewer",
      "dbms": "maindbms",
      "database": "menu",
      "interfaces": [{
        "name": "getMenu",
        "partOfHandling": ["menu"],
        "type": "http",
        "method": "GET",
        "in": "none",
        "out": "list",
        "workload": 1,
        "logic": [
          {
            "type": "httpServiceCall",
            "endpoint": "restaurantMenu",
            "service": "restaurant",
            "out": "list",
            "in": "none"
          },
          {
            "type": "httpServiceCall",
            "endpoint": "deliveryEstimate",
            "service": "delivery",
            "out": "single",
            "in": "single"
          }
        ]
      }
      ]
    },
    {
      "name": "accounting",
      "dbms": "maindbms",
      "database": "accounting",
      "interfaces": [
        {
          "name": "checkIfValidPayment",
          "partOfHandling": ["orderFood"],
          "type": "http",
          "method": "POST",
          "in": "single",
          "out": "single",
          "workload": 2,
          "logic": [
            {
              "type": "databaseAccess",
              "method": "saveSingle"
            },
            {
              "type": "databaseAccess",
              "method": "getSingle"
            }
          ]
        }
      ]
    },
    {
      "name": "notification",
      "dbms": "maindbms",
      "database": "notification",
      "interfaces": [
        {
          "name": "sendNotification",
          "query": "sendNotification",
          "partOfHandling": ["sendNotification"],
          "type": "amqp",
          "in": "single",
          "logic": [
            {
              "type": "databaseAccess",
              "method": "saveSingle"
            }
          ]
        }
      ]
    },
    {
      "name": "order",
      "dbms": "maindbms",
      "database": "ordersdb",
      "interfaces": [
        {
          "name": "placeOrder",
          "partOfHandling": ["orderFood"],
          "type": "http",
          "method": "POST",
          "in": "single",
          "out": "none",
          "workload": 2,
          "logic": [
            {
              "type": "httpServiceCall",
              "endpoint": "checkIfValidPayment",
              "service": "accounting",
              "out": "single",
              "in": "single"
            },
            {
              "type": "httpServiceCall",
              "endpoint": "placeOrder",
              "service": "restaurant",
              "out": "none",
              "in": "single"
            }
          ]
        },
        {
          "name": "foodIsReady",
          "partOfHandling": [
            "orderFood"
          ],
          "type": "http",
          "method": "POST",
          "in": "single",
          "out": "none",
          "workload": 2,
          "logic": [
            {
              "type": "httpServiceCall",
              "endpoint": "startDelivery",
              "service": "delivery",
              "out": "none",
              "in": "single"
            },
            {
              "type": "amqpServiceCall",
              "query": "sendNotification",
              "service": "notification",
              "out": "single"
            }]
        }


      ]
    },
    {
      "name": "restaurant",
      "dbms": "maindbms",
      "database": "restaurant",
      "interfaces": [
        {
          "name": "placeOrder",
          "partOfHandling": ["orderFood"],
          "type": "http",
          "method": "POST",
          "in": "single",
          "out": "none",
          "logic": [
            {
              "type": "databaseAccess",
              "method": "saveSingle"
            },
            {
              "type": "amqpServiceCall",
              "query": "prepareFood",
              "service": "kitchen",
              "out": "single"
            }
          ]
        },
        {
          "name": "restaurantMenu",
          "partOfHandling": ["menu"],
          "type": "http",
          "method": "GET",
          "in": "none",
          "out": "list",
          "logic": [
            {
              "type": "databaseAccess",
              "method": "getList"
            }
          ]
        }
      ]
    },
    {
      "name": "kitchen",
      "dbms": "maindbms",
      "database": "kitchen",
      "interfaces": [
        {
          "name": "prepareFood",
          "query": "prepareFood",
          "partOfHandling": ["orderFood"],
          "type": "amqp",
          "in": "single",
          "logic": [
            {
              "type": "httpServiceCall",
              "endpoint": "foodIsReady",
              "service": "order",
              "out": "none",
              "in": "single"
            }
          ]
        }
      ]
    },
    {
      "name": "delivery",
      "dbms": "maindbms",
      "database": "delivery",
      "interfaces": [
        {
          "name": "startDelivery",
          "partOfHandling": [
            "orderFood"
          ],
          "type": "http",
          "method": "POST",
          "in": "single",
          "out": "none",
          "logic": []
        },
        {
          "name": "deliveryEstimate",
          "partOfHandling": [
            "menu"
          ],
          "workload": 2,
          "type": "http",
          "method": "GET",
          "in": "single",
          "out": "single",
          "logic": []
        }
      ]
    }
  ],
  "databaseServers": [
    {
      "name": "maindbms",
      "databases": ["accounting", "notification", "ordersdb", "restaurant", "kitchen", "delivery", "menu"]
    }
  ]
}